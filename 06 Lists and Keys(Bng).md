
---

# ЁЯФв **React Lists & Keys (рж░рзЗржирзНржбрж╛рж░рж┐ржВ рж▓рж┐рж╕рзНржЯ ржУ ржХрзАрж╕)**

---

## ЁЯзй рзз) **React ржП List ржХрзА?**

React ржП ржЖржорж░рж╛ ржпржЦржи ржПржХрж╛ржзрж┐ржХ ржПржХржЗ ржзрж░ржгрзЗрж░ ржЖржЗржЯрзЗржо (ржпрзЗржоржи ржирж╛ржорзЗрж░ рждрж╛рж▓рж┐ржХрж╛, ржХрж╛рж░рзНржб, ржЯрзЗржмрж┐рж▓рзЗрж░ рж╕рж╛рж░рж┐ ржЗрждрзНржпрж╛ржжрж┐) ржжрзЗржЦрж╛рждрзЗ ржЪрж╛ржЗ тАФ рждржЦржи ржЖржорж░рж╛ **array.map()** ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж┐ред

```jsx
const fruits = ['Apple', 'Banana', 'Cherry'];

return (
  <ul>
    {fruits.map(fruit => <li>{fruit}</li>)}
  </ul>
);
```

ЁЯСЙ ржПржЯрж╛ рзйржЯрж╛ `<li>` рж░рзЗржирзНржбрж╛рж░ ржХрж░ржмрзЗред
ржХрж┐ржирзНрждрзБ React ржПржХржЯрж╛ рж╕рждрж░рзНржХржмрж╛рж░рзНрждрж╛ ржжрж┐ржмрзЗ тАФ
**тАЬEach child in a list should have a unique key prop.тАЭ**

ржПржмрж╛рж░ ржмрзБржЭрж┐ ржПржЗ **key** ржЬрж┐ржирж┐рж╕ржЯрж╛ ржХрзАред

---

## ЁЯФС рзи) **Key ржХрзА ржПржмржВ ржХрзЛржерж╛рзЯ ржмрзНржпржмрж╣рж╛рж░ рж╣рзЯ?**

`key` рж╣рж▓рзЛ React ржПрж░ ржПржХржЯрж┐ **ржмрж┐рж╢рзЗрж╖ prop** ржпрзЗржЯрж╛ React ржХрзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░рзЗ ржХрзЛржи ржПрж▓рж┐ржорзЗржирзНржЯ ржкрж░рж┐ржмрж░рзНрждржи рж╣рзЯрзЗржЫрзЗ, ржХрзЛржиржЯрж╛ ржПржХржЗ ржЖржЫрзЗ, ржХрзЛржиржЯрж╛ ржирждрзБржи тАФ рж╕рзЗржЯрж╛ ржмрзБржЭрждрзЗред

`key` рж╕ржмрж╕ржорзЯ **map() ржПрж░ ржнрж┐рждрж░рзЗ рж░рж┐ржЯрж╛рж░рзНржи ржХрж░рж╛ ржЯржк рж▓рзЗржнрзЗрж▓ ржПрж▓рж┐ржорзЗржирзНржЯрзЗ** ржжрж┐рждрзЗ рж╣рзЯред

```jsx
{items.map(item => (
  <div key={item.id}>
    {item.name}
  </div>
))}
```

ЁЯСЙ `key` ржкрзНрж░рждрж┐ржЯрж┐ ржЖржЗржЯрзЗржорзЗрж░ ржЬржирзНржп **unique** рж╣рждрзЗ рж╣ржмрзЗ (ржПржХржЗ рж▓рж┐рж╕рзНржЯрзЗрж░ ржоржзрзНржпрзЗ)ред

---

## тЪЩя╕П рзй) **React ржХрзЗржи key ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ? (Reconciliation)**

React ржпржЦржи ржХрзЛржирзЛ рж▓рж┐рж╕рзНржЯ ржЖржкржбрзЗржЯ ржХрж░рзЗ, рждржЦржи рж╕рзЗ ржЖржЧрзЗрж░ рж▓рж┐рж╕рзНржЯрзЗрж░ рж╕ржЩрзНржЧрзЗ ржирждрзБржи рж▓рж┐рж╕рзНржЯ ржорж┐рж▓рж┐рзЯрзЗ ржжрзЗржЦрзЗ тАФ ржХрзЛржиржЯрж╛ **add/remove/update** рж╣рзЯрзЗржЫрзЗред

ржПржЗ рж╕ржорзЯ `key` React ржХрзЗ ржмрж▓рзЗ ржжрзЗрзЯ тАФ

> тАЬржПржЗ ржПрж▓рж┐ржорзЗржирзНржЯржЯрж╛ ржЖржЧрзЗрж░ржЯрж╛рж░ рж╕ржорж╛ржи ржирж╛ ржнрж┐ржирзНржиредтАЭ

ЁЯФ╣ ржПрж░ ржлрж▓рзЗ:

* React DOM ржП ржХржо ржХрж╛ржЬ ржХрж░рзЗ (ржлрж╛рж╕рзНржЯ рж░рзЗржирзНржбрж╛рж░ рж╣рзЯ)
* ржПрж▓рж┐ржорзЗржирзНржЯрзЗрж░ state ржарж┐ржХ ржерж╛ржХрзЗ
* ржЕржкрзНрж░рзЯрзЛржЬржирзАрзЯ рж░рж┐-рж░рзЗржирзНржбрж╛рж░ ржПрзЬрж╛ржирзЛ ржпрж╛рзЯ

---

## тЬЕ рзк) **ржнрж╛рж▓рзЛ key ржмржирж╛ржо ржЦрж╛рж░рж╛ржк key**

| ржнрж╛рж▓рзЛ key            | ржЦрж╛рж░рж╛ржк key                            |
| ------------------- | ------------------------------------ |
| item.id (рж╕рзНржерж╛рзЯрзА id) | array index (0,1,2,3...)             |
| ржбрж╛ржЯрж╛ржмрзЗрж╕рзЗрж░ id        | Math.random() (ржкрзНрж░рждрж┐ рж░рзЗржирзНржбрж╛рж░рзЗ ржмржжрж▓рж╛рзЯ) |

ЁЯСЙ **index key** рждржЦржиржЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржпрж╛ржмрзЗ ржпржжрж┐ рж▓рж┐рж╕рзНржЯ ржХржЦржиржУ **reorder, add, remove ржирж╛ рж╣рзЯред**

---

## ЁЯза рзл) **рж╕ржарж┐ржХ ржЙржжрж╛рж╣рж░ржг**

```jsx
// App.jsx
import React from 'react';

const todos = [
  { id: 1, text: 'Buy milk' },
  { id: 2, text: 'Walk dog' },
  { id: 3, text: 'Write notes' }
];

export default function App() {
  return (
    <ul>
      {todos.map(todo => (
        <li key={todo.id}>{todo.text}</li>
      ))}
    </ul>
  );
}
```

---

## тЪая╕П рзм) **ржнрзБрж▓ ржЙржжрж╛рж╣рж░ржг (index key ржПрж░ рж╕ржорж╕рзНржпрж╛)**

```jsx
// BadExample.jsx
import React, { useState } from 'react';

export default function BadExample() {
  const [items, setItems] = useState([
    { id: 'a', text: 'Alpha' },
    { id: 'b', text: 'Beta' },
    { id: 'c', text: 'Gamma' }
  ]);

  const removeFirst = () => setItems(prev => prev.slice(1));

  return (
    <div>
      <button onClick={removeFirst}>Remove first item</button>
      {items.map((item, index) => (
        <div key={index}>
          <input defaultValue={item.text} />
        </div>
      ))}
    </div>
  );
}
```

ЁЯзй ржПржЦржи ржпржжрж┐ рждрзБржорж┐ ржжрзНржмрж┐рждрзАрзЯ ржЗржиржкрзБржЯрзЗ ржЯрж╛ржЗржк ржХрж░рзЛ ржЖрж░ ржкрзНрж░ржержо ржЖржЗржЯрзЗржо ржбрж┐рж▓рж┐ржЯ ржХрж░рзЛ, рждрж╛рж╣рж▓рзЗ ржжрзЗржЦрж╛ ржпрж╛ржмрзЗ ржЗржиржкрзБржЯ ржнрзБрж▓ржнрж╛ржмрзЗ рж╢рж┐ржлржЯ рж╣рзЯрзЗ ржЧрзЗржЫрзЗред
ЁЯСЙ ржХрж╛рж░ржг React index key ржжрзЗржЦрзЗ ржнрзЗржмрзЗржЫрзЗ тАЬржПржЗ ржЗржиржкрзБржЯ рждрзЛ ржПржХржЗ, рж╢рзБржзрзБ ржЯрзЗржХрзНрж╕ржЯ ржмржжрж▓рзЗржЫрзЗ!тАЭ

---

## ЁЯФз рзн) **рж╕ржарж┐ржХ рж╕ржорж╛ржзрж╛ржи (рж╕рзНржерж╛рзЯрзА id ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ)**

```jsx
// GoodExample.jsx
import React, { useState } from 'react';

export default function GoodExample() {
  const [items, setItems] = useState([
    { id: 'a', text: 'Alpha' },
    { id: 'b', text: 'Beta' },
    { id: 'c', text: 'Gamma' }
  ]);

  const removeFirst = () => setItems(prev => prev.slice(1));

  return (
    <div>
      <button onClick={removeFirst}>Remove first item</button>
      {items.map(item => (
        <div key={item.id}>
          <input defaultValue={item.text} />
        </div>
      ))}
    </div>
  );
}
```

ЁЯСЙ ржПржЦржи React ржкрзНрж░рждрж┐ржЯрж┐ ржЗржиржкрзБржЯрзЗрж░ DOM ржарж┐ржХржнрж╛ржмрзЗ ржзрж░рзЗ рж░рж╛ржЦржмрзЗред

---

## ЁЯзй рзо) **Key ржХрзЛржерж╛рзЯ ржжрж┐рждрзЗ рж╣рзЯ**

`key` рж╕ржмрж╕ржорзЯ **map() ржПрж░ ржнрж┐рждрж░рзЗ рж░рж┐ржЯрж╛рж░рзНржи ржХрж░рж╛ element ржП** ржжрж┐рждрзЗ рж╣ржмрзЗред

```jsx
// тЬЕ рж╕ржарж┐ржХ
{todos.map(todo => <ListItem key={todo.id} todo={todo} />)}

// тЭМ ржнрзБрж▓
{todos.map(todo => <ListItem todo={todo} />)} // ржнрж┐рждрж░рзЗ key ржжрж┐рж▓рзЗ ржХрж╛ржЬ рж╣ржмрзЗ ржирж╛
```

---

## ЁЯз▒ рзп) **Fragment ржПрж░ key**

ржПржХржЯрж╛ ржЖржЗржЯрзЗржо ржПржХрж╛ржзрж┐ржХ element рж░рж┐ржЯрж╛рж░рзНржи ржХрж░рж▓рзЗ `React.Fragment` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржпрж╛рзЯ:

```jsx
{items.map(item => (
  <React.Fragment key={item.id}>
    <dt>{item.term}</dt>
    <dd>{item.desc}</dd>
  </React.Fragment>
))}
```

---

## ЁЯзй рззрзж) **Key рждрзИрж░рж┐ ржХрж░рж╛рж░ ржирж┐рзЯржо**

* ЁЯФ╣ ржмрзНржпрж╛ржХржПржирзНржбрзЗрж░ ржерзЗржХрзЗ ржкрж╛ржУрзЯрж╛ id ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЛ
* ЁЯФ╣ client side ржП id ржмрж╛ржирж╛рждрзЗ рж╣рж▓рзЗ (ржпрзЗржоржи `uuid`), рж╕рзЗржЯрж╛ item рждрзИрж░рж┐рж░ рж╕ржорзЯ ржПржХржмрж╛рж░ржЗ ржмрж╛ржирж╛ржУ
* тЭМ ржкрзНрж░рждрж┐ render ржП `Math.random()` ржмрж╛ `Date.now()` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЛ ржирж╛

---

## ЁЯТб рззрзз) **Key ржкрж░рж┐ржмрж░рзНрждржи рж╣рж▓рзЗ ржХрзА рж╣рзЯ**

ржПржХржЯрж╛ ржХржорзНржкрзЛржирзЗржирзНржЯрзЗрж░ key ржпржжрж┐ ржмржжрж▓рзЗ ржпрж╛рзЯ, React ржУржЯрж╛ **unmount ржХрж░рзЗ ржирждрзБржи ржХрж░рзЗ mount ржХрж░рзЗ**ред
ЁЯСЙ ржлрж▓рзЗ ржУржЗ ржХржорзНржкрзЛржирзЗржирзНржЯрзЗрж░ **state рж╣рж╛рж░рж┐рзЯрзЗ ржпрж╛рзЯ**ред

рждрж╛ржЗ key ржпрзЗржи ржЕржХрж╛рж░ржгрзЗ ржмржжрж▓рж╛ржирзЛ ржирж╛ рж╣рзЯред

---

## тЪб рззрзи) **ржкрж╛рж░ржлрж░ржорзНржпрж╛ржирзНрж╕ ржЯрж┐ржкрж╕**

* рж╕ржарж┐ржХ key ржжрж┐рж▓рзЗ React ржХржо DOM ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рзЗ (ржлрж╛рж╕рзНржЯрж╛рж░ ржЖржкржбрзЗржЯ)
* key ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рж▓рзЗ React ржнрж╛ржмрзЗ тАЬржирждрзБржи ржПрж▓рж┐ржорзЗржирзНржЯ ржПрж╕рзЗржЫрзЗтАЭ
* ржмрзЬ рж▓рж┐рж╕рзНржЯрзЗ performance ржПрж░ ржЬржирзНржп `react-window` ржмрж╛ `react-virtualized` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржпрж╛рзЯ

---

## тЬЕ рззрзй) **ржЪрзЗржХрж▓рж┐рж╕рзНржЯ (ржпрж╛ржЪрж╛ржЗ ржХрж░рзЗ ржирж╛ржУ)**

| ржХрж╛ржЬ                                    | рж╣рзНржпрж╛ржБ/ржирж╛ |
| -------------------------------------- | -------- |
| map() ржПрж░ ржкрзНрж░рждрж┐ржЯрж┐ ржЖржЗржЯрзЗржорзЗ key ржжрзЗржУрзЯрж╛ ржЖржЫрзЗ? | тЬЕ        |
| key ржХрж┐ unique ржПржмржВ stable?              | тЬЕ        |
| index key ржХрж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗ?        | тЭМ        |
| key ржХрж┐ ржкрзНрж░рждрж┐ render ржП ржирждрзБржи рж╣рзЯ ржирж╛?      | тЬЕ        |

---

## ЁЯУШ рззрзк) **ржЫрзЛржЯ ржЙржжрж╛рж╣рж░ржгрзЗ ржнрж╛рж▓рзЛ ржмржирж╛ржо ржЦрж╛рж░рж╛ржк key**

### тЬЕ ржнрж╛рж▓рзЛ

```jsx
{people.map(p => (
  <PersonCard key={p.id} person={p} />
))}
```

### тЪая╕П index рж╢рзБржзрзБржорж╛рждрзНрж░ static рж╣рж▓рзЗ

```jsx
{['A','B','C'].map((v, i) => <li key={i}>{v}</li>)}
```

### тЭМ ржЦрж╛рж░рж╛ржк (dynamic list)

```jsx
{todos.map((t, i) => <Todo key={i} todo={t} />)}
```

---

## ЁЯОп рж╕рж╛рж░рж╕ржВржХрзНрж╖рзЗржк

| ржмрж┐рж╖рзЯ                 | ржмрзНржпрж╛ржЦрзНржпрж╛                                       |
| -------------------- | ---------------------------------------------- |
| **List**             | array.map() ржжрж┐рзЯрзЗ ржПрж▓рж┐ржорзЗржирзНржЯ рж░рзЗржирзНржбрж╛рж░ ржХрж░рж╛          |
| **Key**              | React ржХрзЗ ржкрзНрж░рждрж┐ржЯрж┐ ржПрж▓рж┐ржорзЗржирзНржЯ ржЖрж▓рж╛ржжрж╛ ржХрж░рзЗ ржЪрзЗржирж╛рж░ ржЙржкрж╛рзЯ |
| **рж╕ржарж┐ржХ key**         | item.id ржмрж╛ рж╕рзНржерж╛рзЯрзА unique ржорж╛ржи                   |
| **index key рж╕ржорж╕рзНржпрж╛** | reorder/add/remove ржХрж░рж▓рзЗ ржнрзБрж▓ DOM ржЖржкржбрзЗржЯ рж╣рзЯ       |
| **state рж╕ржорж╕рзНржпрж╛**     | key ржмржжрж▓рж╛рж▓рзЗ ржХржорзНржкрзЛржирзЗржирзНржЯ ржирждрзБржи рж╣рзЯрзЗ ржпрж╛рзЯ             |
| **Performance**      | key ржарж┐ржХ ржерж╛ржХрж▓рзЗ React ржжрзНрж░рзБржд ржХрж╛ржЬ ржХрж░рзЗ              |

---

