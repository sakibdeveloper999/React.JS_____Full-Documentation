
---

# ЁЯзй React.js ржП useContext Hook тАФ ржзрж╛ржкрзЗ ржзрж╛ржкрзЗ ржмрзНржпрж╛ржЦрзНржпрж╛

**ржПржХ ржмрж╛ржХрзНржпрзЗ рж╕рж╛рж░рж╕ржВржХрзНрж╖рзЗржк:**
`useContext` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржХрзЛржирзЛ ржХржорзНржкрзЛржирзЗржирзНржЯ рж╕рж╣ржЬрзЗржЗ ржЙржкрж░рзЗрж░ рж▓рзЗржнрзЗрж▓рзЗрж░ `Provider` ржерзЗржХрзЗ ржбрзЗржЯрж╛ ржирж┐рждрзЗ ржкрж╛рж░рзЗ, ржкрзНрж░ржкрзНрж╕ ржбрзНрж░рж┐рж▓рж┐ржВ ржЫрж╛ржбрж╝рж╛ржЗ тАФ ржпрзЗржоржи ржерж┐ржо, ржЗржЙржЬрж╛рж░ ржЕржерзЗржиржЯрж┐ржХрзЗрж╢ржи ржмрж╛ ржнрж╛рж╖рж╛ рж╕рзЗржЯрж┐ржВрж╕ред

---

## рззя╕ПтГг Context ржПржмржВ `useContext` ржХрзА?

* **Context** рж╣рж▓рзЛ ржПржоржи ржПржХржЯрж┐ рж╕рж┐рж╕рзНржЯрзЗржо, ржпрж╛рж░ ржорж╛ржзрзНржпржорзЗ ржЖржкржирж┐ ржПржХрж╛ржзрж┐ржХ ржХржорзНржкрзЛржирзЗржирзНржЯрзЗ ржПржХрж╕рж╛ржерзЗ ржорж╛ржи (value) рж╢рзЗрзЯрж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░рзЗржи, ржкрзНрж░ржкрзНрж╕ ржирж╛ ржкрж╛ржарж┐рзЯрзЗржУред
* `useContext(ContextObject)` рж╣рж▓рзЛ ржПржХржЯрж┐ React Hook, ржпрж╛ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ Context-ржП рж╕рж╛ржмрж╕рзНржХрзНрж░рж╛ржЗржм рж╣рзЯ ржПржмржВ рж╕рзЗржЗ Context-ржПрж░ ржмрж░рзНрждржорж╛ржи ржорж╛ржи рж░рж┐ржЯрж╛рж░рзНржи ржХрж░рзЗред
* ржПржХржЯрж┐ **Context** рж╕рж╛ржзрж╛рж░ржгржд ржжрзБржЗржЯрж┐ ржЕржВрж╢рзЗ рждрзИрж░рж┐ рж╣рзЯ:

  * `const MyContext = React.createContext(defaultValue)`
  * `<MyContext.Provider value={...}>` тАФ ржПржЯрж┐ ржпрзЗрж╕ржм ржХржорзНржкрзЛржирзЗржирзНржЯржХрзЗ ржШрж┐рж░рзЗ рж░рж╛ржЦрзЗ, рждрж╛ржжрзЗрж░ ржоржзрзНржпрзЗ value ржкрзНрж░ржжрж╛ржи ржХрж░рзЗред

---

## рзия╕ПтГг ржХржЦржи `useContext` ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмрзЗржи?

`useContext` рждржЦржи ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмрзЗржи ржпржЦржи ржПржХржЗ ржбрзЗржЯрж╛ ржЕржирзЗржХржЧрзБрж▓рзЛ ржХржорзНржкрзЛржирзЗржирзНржЯрзЗ ржжрж░ржХрж╛рж░ рж╣рзЯ, ржпрзЗржоржиржГ

* ржерж┐ржо (light / dark)
* ржЗржЙржЬрж╛рж░ ржЕржерзЗржиржЯрж┐ржХрзЗрж╢ржи (currentUser, login/logout)
* ржнрж╛рж╖рж╛ ржмрж╛ рж▓рзЛржХрзЗрж▓ (i18n)
* ржЕрзНржпрж╛ржк рж╕рзЗржЯрж┐ржВрж╕ ржмрж╛ ржлрж┐ржЪрж╛рж░ ржлрзНрж▓рзНржпрж╛ржЧ
* ржПржХрж╛ржзрж┐ржХ рж╢рж╛ржЦрж╛рзЯ ржмрзНржпржмрж╣рзГржд UI рж╕рзНржЯрзЗржЯ (modal, toast ржЗрждрзНржпрж╛ржжрж┐)

> рждржмрзЗ рж╢рзБржзрзБржорж╛рждрзНрж░ ржПржХржЯрж┐ ржХржорзНржкрзЛржирзЗржирзНржЯрзЗрж░ рж▓рзЛржХрж╛рж▓ рж╕рзНржЯрзЗржЯрзЗрж░ ржЬржирзНржп Context ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржарж┐ржХ ржирзЯред

---

## рзйя╕ПтГг ржЙржжрж╛рж╣рж░ржг: ржерж┐ржо ржЯржЧрж▓рж╛рж░ (Theme Toggler)

### ЁЯЕР Step A тАФ Context рждрзИрж░рж┐

```jsx
// theme-context.js
import React from 'react';
export const ThemeContext = React.createContext({
  theme: 'light',         // ржбрж┐ржлрж▓рзНржЯ ржерж┐ржо
  toggleTheme: () => {}   // ржлрж╛ржВрж╢ржирзЗрж░ ржбрж┐ржлрж▓рзНржЯ ржорж╛ржи
});
```

### ЁЯЕС Step B тАФ App рж░рзБржЯрзЗ Provider ржмрзНржпржмрж╣рж╛рж░

```jsx
// App.jsx
import React, { useState } from 'react';
import { ThemeContext } from './theme-context';
import Page from './Page';

export default function App(){
  const [theme, setTheme] = useState('light');
  const toggleTheme = () => setTheme(t => (t === 'light' ? 'dark' : 'light'));

  return (
    <ThemeContext.Provider value={{ theme, toggleTheme }}>
      <Page />
    </ThemeContext.Provider>
  );
}
```

### ЁЯЕТ Step C тАФ Context ржнрзНржпрж╛рж▓рзБ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛

```jsx
// Header.jsx
import React, { useContext } from 'react';
import { ThemeContext } from './theme-context';

export default function Header(){
  const { theme, toggleTheme } = useContext(ThemeContext);
  return (
    <header className={theme === 'dark' ? 'bg-gray-900' : 'bg-white'}>
      <button onClick={toggleTheme}>Toggle theme</button>
    </header>
  );
}
```

ЁЯСЙ ржПржЦржи `ThemeContext.Provider`-ржПрж░ ржоржзрзНржпрзЗ ржерж╛ржХрж╛ ржпрзЗржХрзЛржирзЛ ржХржорзНржкрзЛржирзЗржирзНржЯ `useContext(ThemeContext)` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржерж┐ржо ржкрзЬрждрзЗ ржмрж╛ ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗред

---

## рзкя╕ПтГг ржХрзАржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░рзЗ (Runtime ржП Step-by-Step)

1. `createContext(default)` Context ржЕржмржЬрзЗржХрзНржЯ рждрзИрж░рж┐ ржХрж░рзЗ, ржпрж╛рж░ ржоржзрзНржпрзЗ Provider ржУ Consumer ржерж╛ржХрзЗред
2. `<Provider value={...}>` рж╕рж╛ржмржЯрзНрж░рж┐ (subtree)-рж░ ржЬржирзНржп ржПржХржЯрж┐ value рж╕рзЗржЯ ржХрж░рзЗред
3. `useContext(MyContext)` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржХржорзНржкрзЛржирзЗржирзНржЯ рж╕рзЗржЗ Provider-ржПрж░ value ржкрж╛рзЯред
4. Provider-ржПрж░ value ржкрж░рж┐ржмрж░рзНрждржи рж╣рж▓рзЗ, рж╕ржВрж╢рзНрж▓рж┐рж╖рзНржЯ рж╕ржм Consumer ржкрзБржирж░рж╛рзЯ рж░рзЗржирзНржбрж╛рж░ рж╣рзЯред

---

## рзля╕ПтГг ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг рждржерзНржп ржУ Best Practices

* **Provider placement:** Provider-ржХрзЗ ржЕрзНржпрж╛ржкрзЗрж░ ржЯржк рж▓рзЗржнрзЗрж▓рзЗ рж░рж╛ржЦрзБржи (ржпрзЗржоржи App ржмрж╛ ржлрж┐ржЪрж╛рж░ рж░рзБржЯрзЗ)ред
  рждржмрзЗ ржПржХржЯрж┐ ржмрзЬ Provider-ржПрж░ ржоржзрзНржпрзЗ рж╕ржм ржХрж┐ржЫрзБ ржирж╛ рж░рж╛ржЦрж╛ржЗ ржнрж╛рж▓рзЛ тАФ ржЖрж▓рж╛ржжрж╛ ржХржиржЯрзЗржХрзНрж╕ржЯрзЗ ржнрж╛ржЧ ржХрж░рзБржи (theme, auth, UI ржЗрждрзНржпрж╛ржжрж┐)ред

* **Value stability:** ржмрж╛рж░ржмрж╛рж░ рж░рж┐-рж░рзЗржирзНржбрж╛рж░ ржмржирзНржз ржХрж░рждрзЗ value memoize ржХрж░рзБржи:

  ```jsx
  const value = useMemo(() => ({ theme, toggleTheme }), [theme, toggleTheme]);
  ```

* **ржмрзЗрж╢рж┐ ржкрж░рж┐ржмрж░рзНрждржирж╢рзАрж▓ ржбрзЗржЯрж╛** (ржпрзЗржоржи input keystroke) Context-ржП рж░рж╛ржЦрж╛ ржарж┐ржХ ржирзЯред

* **ржбрж┐ржлрж▓рзНржЯ ржорж╛ржи (defaultValue)** ржХрзЗржмрж▓ рждржЦржиржЗ ржмрзНржпржмрж╣рзГржд рж╣рзЯ, ржпржЦржи ржХрзЛржирзЛ Provider ржЫрж╛рзЬрж╛ Context ржмрзНржпржмрж╣рзГржд рж╣рзЯред

* **Props vs Context:** ржПржХ ржмрзНрж░рж╛ржЮрзНржЪрзЗрж░ ржЬржирзНржп ржкрзНрж░ржкрзНрж╕ржЗ ржпржерзЗрж╖рзНржЯ, ржПржХрж╛ржзрж┐ржХ ржмрзНрж░рж╛ржЮрзНржЪрзЗрж░ ржЬржирзНржп Context ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржиред

---

## рзмя╕ПтГг ржкрж╛рж░ржлрж░ржорзНржпрж╛ржирзНрж╕ ржмрж┐ржмрзЗржЪржирж╛

* Context-ржПрж░ value ржкрж░рж┐ржмрж░рзНрждржи рж╣рж▓рзЗ рж╕ржм consumer ржХржорзНржкрзЛржирзЗржирзНржЯ рж░рж┐-рж░рзЗржирзНржбрж╛рж░ рж╣рзЯред
* рж╕ржорж╛ржзрж╛ржи:

  * ржЖрж▓рж╛ржжрж╛ ржХржиржЯрзЗржХрзНрж╕ржЯрзЗ ржнрж╛ржЧ ржХрж░рзБржи (theme, auth ржЖрж▓рж╛ржжрж╛)
  * `useMemo` ржУ `useCallback` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи
  * ржжрзНрж░рзБржд ржкрж░рж┐ржмрж░рзНрждржирж╢рзАрж▓ ржбрзЗржЯрж╛ Context-ржП рж░рж╛ржЦржмрзЗржи ржирж╛

---

## рзня╕ПтГг ржкрзНржпрж╛ржЯрж╛рж░рзНржи ржУ ржЕрзНржпрж╛ржбржнрж╛ржирзНрж╕ ржЗржЙржЬ

**тЬЕ ржПржХрж╛ржзрж┐ржХ Context ржПржХрж╕рж╛ржерзЗ ржмрзНржпржмрж╣рж╛рж░:**

```jsx
<AuthProvider>
  <ThemeProvider>
    <App />
  </ThemeProvider>
</AuthProvider>
```

**тЬЕ ржХрж╛рж╕рзНржЯржо рж╣рзБржХ рждрзИрж░рж┐ ржХрж░рзЗ Context рж╕рж╣ржЬрзЗ ржмрзНржпржмрж╣рж╛рж░:**

```jsx
const AuthContext = createContext(null);

export function useAuth(){
  const ctx = useContext(AuthContext);
  if (!ctx) throw new Error('useAuth must be used within AuthProvider');
  return ctx;
}
```

**тЬЕ Context + Reducer (ржЬржЯрж┐рж▓ рж╕рзНржЯрзЗржЯ ржорзНржпрж╛ржирзЗржЬржорзЗржирзНржЯрзЗрж░ ржЬржирзНржп):**

```jsx
const [state, dispatch] = useReducer(reducer, initialState);
<Context.Provider value={{ state, dispatch }} />
```

---

## рзоя╕ПтГг ржЯрзЗрж╕рзНржЯрж┐ржВ ржЯрж┐ржкрж╕

```jsx
render(
  <ThemeContext.Provider value={{ theme: 'dark', toggleTheme: jest.fn() }}>
    <Header />
  </ThemeContext.Provider>
);
```

---

## рзпя╕ПтГг ржмрж┐ржХрж▓рзНржк ржУ ржХржЦржи ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмрзЗржи

| ржмрж┐ржХрж▓рзНржк                      | ржХржмрзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмрзЗржи                              |
| --------------------------- | ---------------------------------------------- |
| **Props**                   | рж╢рзБржзрзБржорж╛рждрзНрж░ parent тЖТ child ржбрзЗржЯрж╛ ржкрж╛ржарж╛ржирзЛрж░ ржЬржирзНржп     |
| **Local state**             | ржЖрж▓рж╛ржжрж╛ ржХржорзНржкрзЛржирзЗржирзНржЯрзЗрж░ ржирж┐ржЬрж╕рзНржм рж╕рзНржЯрзЗржЯрзЗрж░ ржЬржирзНржп         |
| **Redux / Zustand / Jotai** | ржмрзЬ рж╕рзНржХрзЗрж▓ ржЧрзНрж▓рзЛржмрж╛рж▓ рж╕рзНржЯрзЛрж░ ржУ ржбрж┐ржмрж╛ржЧрж┐ржВрзЯрзЗрж░ ржЬржирзНржп       |
| **Event emitter**           | ржЙржЪрзНржЪ ржкрж╛рж░ржлрж░ржорзНржпрж╛ржирзНрж╕ cross-component ржЖржкржбрзЗржЯрзЗрж░ ржЬржирзНржп |

---

## ЁЯФЯ рж╕рж╛ржзрж╛рж░ржг ржнрзБрж▓ (Pitfalls)

* `value` рждрзЗ ржирждрзБржи ржЕржмржЬрзЗржХрзНржЯ ржкрж╛ржарж╛рж▓рзЗ рж╕ржм Consumer рж░рж┐-рж░рзЗржирзНржбрж╛рж░ рж╣рзЯред
* Provider ржЫрж╛рзЬрж╛ Context ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж▓рзЗ default ржорж╛ржи ржкрж╛ржУрзЯрж╛ ржпрж╛рзЯ (ржпрж╛ ржмрж╛ржЧ рждрзИрж░рж┐ ржХрж░рзЗ)ред
* Context-ржП рж╕ржмржХрж┐ржЫрзБ рж░рж╛ржЦрж▓рзЗ рж░рж┐-рж░рзЗржирзНржбрж╛рж░ ржмрзЗрж╢рж┐ рж╣рзЯред
* Context-ржПрж░ ржнрзНржпрж╛рж▓рзБ ржкрж░рж┐ржмрж░рзНрждржирзЗрж░ рж╕ржорзЯ ржорж┐ржЙржЯрзЗрж╢ржи (mutation) ржХрж░рж╛ ржпрж╛ржмрзЗ ржирж╛ред

---

## рззрззя╕ПтГг ржмрж╛рж╕рзНрждржм ржЬрзАржмржирзЗрж░ ржмрзНржпржмрж╣рж╛рж░ ржЙржжрж╛рж╣рж░ржг

* ржерж┐ржо ржЯржЧрж▓рж╛рж░
* ржЗржЙржЬрж╛рж░ ржЕрже (login/logout)
* ржХрж╛рж░рзНржЯ ржорзНржпрж╛ржирзЗржЬржорзЗржирзНржЯ
* ржорж╛рж▓рзНржЯрж┐-рж▓рзНржпрж╛ржЩрзНржЧрзБрзЯрзЗржЬ рж╕рж╛ржкрзЛрж░рзНржЯ
* ржоржбрж╛рж▓ / ржЯрзЛрж╕рзНржЯ ржХржирзНржЯрзНрж░рзЛрж▓

---

## рззрзия╕ПтГг ржмрзНржпржмрж╣рж╛рж░ ржЪрзЗржХрж▓рж┐рж╕рзНржЯ тЬЕ

| ржкрзНрж░рж╢рзНржи                               | рж╕рж┐ржжрзНржзрж╛ржирзНржд              |
| ------------------------------------ | ---------------------- |
| ржПржХрж╛ржзрж┐ржХ ржЬрж╛рзЯржЧрж╛рзЯ ржбрзЗржЯрж╛ ржжрж░ржХрж╛рж░?            | тЬФ Context ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи |
| ржбрзЗржЯрж╛ ржЦрзБржм ржжрзНрж░рзБржд ржкрж░рж┐ржмрж░рзНрждрж┐ржд рж╣рзЯ?         | тЭМ Context ржирзЯ           |
| ржХржирж╕рж╛рж░рзНржи ржЖрж▓рж╛ржжрж╛ ржХрж░рж╛ ржпрж╛рзЯ?               | тЬФ ржнрж╛ржЧ ржХрж░рзБржи             |
| Provider value рж╕рзНржерж┐рждрж┐рж╢рзАрж▓ (memoized)? | тЬФ рж╣рзНржпрж╛ржБ                |

---

## рззрзйя╕ПтГг ржЙржжрж╛рж╣рж░ржг: Auth Context (рж╕ржорзНржкрзВрж░рзНржг)

```jsx
// auth-context.js
import React, { createContext, useCallback, useContext, useState } from 'react';
const AuthContext = createContext(null);

export function AuthProvider({ children }){
  const [user, setUser] = useState(null);

  const login = useCallback(async (creds) => {
    const fetchedUser = await fakeApiLogin(creds);
    setUser(fetchedUser);
  }, []);

  const logout = useCallback(() => setUser(null), []);

  const value = React.useMemo(() => ({ user, login, logout }), [user, login, logout]);

  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;
}

export function useAuth(){
  const ctx = useContext(AuthContext);
  if (!ctx) throw new Error('useAuth must be used within an AuthProvider');
  return ctx;
}
```

ржПржЦржи ржЖржкржирж┐ ржпрзЗржХрзЛржирзЛ ржХржорзНржкрзЛржирзЗржирзНржЯрзЗ `useAuth()` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ `user`, `login`, `logout` ржкрзЗрждрзЗ ржкрж╛рж░ржмрзЗржиред

---

## рззрзкя╕ПтГг ржЫрзЛржЯ ржЪрж┐ржЯрж╢рж┐ржЯ ЁЯТб

* рждрзИрж░рж┐ ржХрж░рзБржи: `const C = createContext(default)`
* ржкрзНрж░ржжрж╛ржи ржХрж░рзБржи: `<C.Provider value={...}>`
* ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи: `const v = useContext(C)`
* Value ржорзЗржорзЛрж╛ржЗржЬ ржХрж░рзБржи ржПржмржВ Context ржЖрж▓рж╛ржжрж╛ рж░рж╛ржЦрзБржиред

---

## ЁЯФЪ рж╕рж╛рж░рж╛ржВрж╢

* Context ржЕрзНржпрж╛ржк-ржЬрзБрзЬрзЗ рж╢рзЗрзЯрж╛рж░ржХрзГржд ржбрзЗржЯрж╛ ржорзНржпрж╛ржирзЗржЬ ржХрж░рждрзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░рзЗред
* `useContext` ржПржЗ ржбрзЗржЯрж╛ рж╕рж╣ржЬрзЗ ржмрзНржпржмрж╣рж╛рж░рзЗрж░ рж╕рзБржпрзЛржЧ ржжрзЗрзЯред
* ржЫрзЛржЯ рж╕рзНржХрзЗрж▓рзЗрж░ ржкрзНрж░рзЛржЬрзЗржХрзНржЯрзЗ ржПржЯрж┐ Redux-ржПрж░ ржмрж┐ржХрж▓рзНржк рж╣рж┐рж╕рзЗржмрзЗржУ ржмрзНржпржмрж╣рж╛рж░ржпрзЛржЧрзНржпред

---
